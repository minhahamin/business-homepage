# 📧 이메일 발송 설정 가이드 (Resend)

견적 요청 및 상담 신청 시 관리자에게 이메일을 자동으로 발송하는 기능입니다.

## 🚀 빠른 시작

### 1단계: Resend 패키지 설치

```bash
npm install resend
```

### 2단계: Resend 가입 및 API 키 발급

1. **Resend 웹사이트 접속**: https://resend.com/
2. **Sign Up** (무료 계정 생성)
   - GitHub 또는 Google 계정으로 간편 가입
3. **API Keys** 메뉴로 이동
4. **Create API Key** 클릭
5. **이름 입력** (예: `business-homepage`)
6. **API 키 복사** (예: `re_123abc...`)
   - ⚠️ 한 번만 표시되니 반드시 복사하세요!

### 3단계: 환경 변수 설정

프로젝트 루트의 `.env` 파일에 추가:

```env
# Resend API 키
RESEND_API_KEY=re_your_api_key_here

# 발신자 이메일 (처음에는 이것 사용)
RESEND_FROM_EMAIL=onboarding@resend.dev

# 수신자 이메일 (실제 받을 이메일 주소)
ADMIN_EMAIL=your-email@gmail.com
```

**⚠️ 중요**:
- `RESEND_API_KEY`: Resend에서 복사한 API 키
- `ADMIN_EMAIL`: 견적/상담 요청을 받을 **본인 이메일 주소**
- `RESEND_FROM_EMAIL`: 처음에는 `onboarding@resend.dev` 사용 (테스트용)

### 4단계: 개발 서버 재시작

```bash
npm run dev
```

---

## ✅ 테스트

### 1. 무료 상담 신청 테스트
1. http://localhost:3000/consultation 접속
2. 폼 작성 후 제출
3. **본인 이메일** 확인! 📧

### 2. 견적 요청 테스트
1. http://localhost:3000/support/quote 접속
2. 폼 작성 후 제출
3. **본인 이메일** 확인! 📧

---

## 📊 발송 확인

### 터미널에서 확인
`npm run dev` 실행 중인 터미널에서:
```
✅ 이메일 전송 성공: { id: 're_...', ... }
```

### Resend 대시보드에서 확인
1. https://resend.com/emails 접속
2. 발송된 이메일 목록 확인
3. 각 이메일의 상태 확인:
   - ✅ **Delivered**: 성공
   - ⏳ **Processing**: 처리 중
   - ❌ **Failed**: 실패

---

## 🎯 무료 플랜

- ✅ **월 3,000통** 무료
- ✅ **월 100통/일** 제한
- ✅ 모든 기능 사용 가능

**충분히 사용 가능!**
- 일 100통 = 매일 100건의 문의 처리 가능
- 대부분의 비즈니스 사이트에 충분

---

## 🔧 본인 도메인 사용 (선택사항)

### 왜 필요한가?
- `onboarding@resend.dev`는 테스트용
- 실제 서비스에서는 `contact@yourcompany.com` 사용 권장

### 설정 방법

1. **Resend 대시보드** → **Domains** 메뉴
2. **Add Domain** 클릭
3. 본인 도메인 입력 (예: `yourcompany.com`)
4. **DNS 레코드 추가**:
   - Resend가 제공하는 DNS 레코드를 도메인 관리 페이지에 추가
   - (예: Cloudflare, GoDaddy, Namecheap 등)
5. **인증 대기** (보통 1-24시간)
6. 인증 완료 후 `.env` 수정:
   ```env
   RESEND_FROM_EMAIL=contact@yourcompany.com
   ```

---

## 📧 이메일 템플릿

### 견적 요청 이메일 예시:
```
🔔 새로운 견적 요청 - (주)테스트

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 견적 요청서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📌 기본 정보
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🏢 회사명: (주)테스트
👤 담당자: 홍길동
📧 이메일: test@example.com
📞 연락처: 010-1234-5678

📌 프로젝트 정보
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💼 서비스 유형: 웹사이트 개발
💰 예산 범위: 1000만원 - 3000만원
📅 개발 일정: 1-3개월

📝 프로젝트 설명:
쇼핑몰 웹사이트 개발 필요

⏰ 접수 시간: 2025. 1. 1. 오후 2:30:00
```

### 상담 신청 이메일 예시:
```
🔔 새로운 상담 신청 - 홍길동님

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 상담 신청서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📌 기본 정보
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👤 이름: 홍길동
📧 이메일: test@example.com
📞 연락처: 010-1234-5678

📌 상담 내용
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💼 관심 서비스: 웹 개발 & 앱 개발
💰 예산: 1000만원 - 3000만원

⏰ 접수 시간: 2025. 1. 1. 오후 2:30:00
```

---

## 🐛 문제 해결

### 이메일이 안 와요!
1. **.env 파일 확인**
   - `RESEND_API_KEY`가 올바른지 확인
   - `ADMIN_EMAIL`에 본인 이메일 주소 입력했는지 확인

2. **개발 서버 재시작**
   ```bash
   npm run dev
   ```

3. **스팸 폴더 확인**
   - Gmail 스팸 폴더 확인
   - 프로모션 탭 확인

4. **터미널 확인**
   - `✅ 이메일 전송 성공` 메시지가 뜨는지 확인
   - 에러 메시지가 있다면 내용 확인

5. **Resend 대시보드 확인**
   - https://resend.com/emails
   - 이메일 발송 기록 확인

### API 키 오류
```
Error: Missing API key
```

**해결**:
- `.env` 파일이 프로젝트 루트에 있는지 확인
- `RESEND_API_KEY=` 뒤에 API 키가 제대로 입력되었는지 확인
- 개발 서버 재시작

### 발송 제한
```
Error: Rate limit exceeded
```

**해결**:
- 무료 플랜: 일 100통 제한
- 잠시 후 다시 시도
- 또는 유료 플랜 업그레이드

---

## 📈 통계 확인

Resend 대시보드에서 확인 가능:
- 📊 발송 성공률
- 📈 일별/월별 발송량
- 🔍 개별 이메일 상태
- ⏱️ 배달 시간

---

## 💰 요금제

### Free (무료)
- ✅ 월 3,000통
- ✅ 일 100통 제한
- ✅ 모든 기능

### Pro ($20/월)
- 월 50,000통
- 일 제한 없음
- 커스텀 도메인 무제한

대부분의 경우 **무료 플랜으로 충분합니다!**

---

## ✨ 추가 기능 (선택사항)

### 1. 신청자에게 자동 회신 이메일
```typescript
// 신청자에게 확인 이메일 보내기
await resend.emails.send({
  from: FROM_EMAIL,
  to: formData.email, // 신청자 이메일
  subject: '상담 신청이 접수되었습니다',
  html: `
    <p>${formData.name}님, 안녕하세요!</p>
    <p>상담 신청이 정상적으로 접수되었습니다.</p>
    <p>영업일 기준 1-2일 내에 연락드리겠습니다.</p>
  `
});
```

### 2. HTML 템플릿 사용
더 예쁜 이메일을 위해 HTML/CSS 사용 가능

### 3. 첨부 파일
파일 첨부 기능 추가 가능

---

## 🎉 완료!

이제 견적 요청과 상담 신청이 **실시간으로 이메일**로 전송됩니다!

궁금한 점이 있으면 Resend 문서를 참고하세요:
- 📚 https://resend.com/docs

